
  <!-- MAIN CONTENT -->
  <main id="mainContent">

    <!-- CONTEÚDO PRINCIPAL -->
    <div id="conteudoPrincipal">
      <!-- LAYOUT HORIZONTAL (LADO A LADO) -->
      <div class="row">

        <!-- PARTE 1: SUGESTÃO DA IA (ESQUERDA - 50%) -->
        <div class="col s12 l6">
          <div class="box" style="position: relative; min-height: 300px;">
            <h6><i class='bx bx-brain'></i> Sugestão da IA</h6>
            <div id="resultadoIA" style="max-height: 500px; overflow-y: auto;">
              <em>Preencha os dados do paciente e clique em "Analisar" para receber uma sugestão da IA...</em>
            </div>
            <div class="loading-overlay" id="loadingIA">
              <div class="preloader-wrapper big active">
                <div class="spinner-layer spinner-blue-only">
                  <div class="circle-clipper left">
                    <div class="circle"></div>
                  </div>
                  <div class="gap-patch">
                    <div class="circle"></div>
                  </div>
                  <div class="circle-clipper right">
                    <div class="circle"></div>
                  </div>
                </div>
              </div>
              <p>Analisando dados com IA...</p>
            </div>
          </div>

          <!-- CAMPO DE PROMPT ADICIONAL -->
          <div class="box" style="margin-top: 15px;">
            <h6><i class='bx bx-message-square-edit'></i> Prompt Adicional</h6>
            <div class="input-field" style="margin-top: 15px;">
              <textarea id="promptAdicional" class="materialize-textarea"
                placeholder="Ex: Considerar histórico de diabetes, focar em medicamentos genéricos, evitar anti-inflamatórios..."></textarea>
              <label for="promptAdicional">Instruções extras para a IA (opcional)</label>
            </div>
            <button type="button" class="btn waves-effect teal" onclick="refazerAnalise()" id="btnRefazer">
              <i class='bx bx-refresh'></i> Refazer Análise
            </button>
          </div>
        </div>

        <!-- PARTE 2: TABS (DIREITA - 50%) -->
        <div class="col s12 l6">
          <!-- TABS HEADER -->
          <div class="custom-tabs">
            <button class="custom-tab active" onclick="switchTab('tabDadosPaciente')" id="btnTabDados">
              <i class='bx bx-user-circle'></i> Dados do Paciente
            </button>
            <button class="custom-tab" onclick="switchTab('tabMedicamentos')" id="btnTabMedicamentos">
              <i class='bx bx-plus-medical'></i> Adicionar Medicamento
            </button>
            <button class="custom-tab" onclick="switchTab('tabObservacoes')" id="btnTabObservacoes">
              <i class='bx bx-note'></i> Observações
            </button>
          </div>

          <!-- TABS CONTENT -->
          <div class="tab-content-wrapper">

            <!-- TAB 1: DADOS DO PACIENTE -->
            <div id="tabDadosPaciente" class="tab-panel active">
              <form id="formPaciente">
                <div class="row">
                  <div class="input-field col s12 m6">
                    <input type="text" id="nomePaciente" required>
                    <label for="nomePaciente">Nome do Paciente *</label>
                    <span class="error-message" id="errorNome">Campo obrigatório (mínimo 3 caracteres)</span>
                  </div>
                  <div class="input-field col s12 m3">
                    <input type="number" id="idadePaciente" min="0" max="150" required>
                    <label for="idadePaciente">Idade *</label>
                    <span class="error-message" id="errorIdade">Idade inválida (0-150)</span>
                  </div>
                  <div class="input-field col s12 m3">
                    <input type="number" id="pesoPaciente" min="1" max="300" step="0.1">
                    <label for="pesoPaciente">Peso (kg)</label>
                    <span class="error-message" id="errorPeso">Peso inválido (1-300kg)</span>
                  </div>
                </div>

                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="sintomas" class="materialize-textarea" required></textarea>
                    <label for="sintomas">Sintomas Relatados *</label>
                    <span class="error-message" id="errorSintomas">Descreva os sintomas (mínimo 10 caracteres)</span>
                  </div>
                </div>

                <div class="row">
                  <div class="input-field col s12 m6">
                    <textarea id="alergias" class="materialize-textarea"></textarea>
                    <label for="alergias">Alergias Conhecidas</label>
                  </div>
                  <div class="input-field col s12 m6">
                    <textarea id="medicamentosUso" class="materialize-textarea"></textarea>
                    <label for="medicamentosUso">Medicamentos em Uso</label>
                  </div>
                </div>

                <div class="row">
                  <div class="col s12">
                    <button type="button" class="btn green" onclick="gerarPrescricao()" id="btnAnalisar">
                      <i class='bx bx-brain'></i> Analisar com IA
                    </button>
                    <button type="button" class="btn grey lighten-1" onclick="limparFormulario()">
                      <i class='bx bx-trash'></i> Limpar
                    </button>
                  </div>
                </div>
              </form>
            </div>

            <!-- TAB 2: ADICIONAR MEDICAMENTOS -->
            <div id="tabMedicamentos" class="tab-panel">
              <div class="row">
                <div class="col s12">
                  <h6 style="color:#00695c;margin-bottom:20px;">
                    <i class='bx bx-plus-circle'></i> Gerenciar Medicamentos
                  </h6>
                  
                  <table class="responsive-table">
                    <thead>
                      <tr class="rows">
                        <th class="grey lighten-1 font-normal">Medicamento</th>
                        <th class="grey lighten-1 font-normal">Via de administração</th>
                        <th class="grey lighten-1 font-normal">Posologia</th>
                        <th class="grey lighten-1 font-normal">Ação</th>
                      </tr>
                    </thead>
                    <tbody id="tabela-medicamento-body">
                      <tr class="row">
                        <td>
                          <select name="medicamentoNome[]">
                            <option value="" disabled selected>Selecione</option>
                            <option value="Paracetamol 500mg">Paracetamol 500mg</option>
                            <option value="Paracetamol 750mg">Paracetamol 750mg</option>
                            <option value="Dipirona 500mg">Dipirona 500mg</option>
                            <option value="Ibuprofeno 600mg">Ibuprofeno 600mg</option>
                            <option value="Amoxicilina 500mg">Amoxicilina 500mg</option>
                            <option value="Azitromicina 500mg">Azitromicina 500mg</option>
                            <option value="Omeprazol 20mg">Omeprazol 20mg</option>
                            <option value="Losartana 50mg">Losartana 50mg</option>
                            <option value="Vitamina C">Vitamina C</option>
                            <option value="Vitamina D">Vitamina D</option>
                          </select>
                        </td>
                        <td>
                          <select name="medicamentoVia[]">
                            <option value="" disabled selected>Selecione</option>
                            <option value="Oral">Oral</option>
                            <option value="Intravenosa">Intravenosa</option>
                            <option value="Intramuscular">Intramuscular</option>
                            <option value="Tópica">Tópica</option>
                            <option value="Subcutânea">Subcutânea</option>
                            <option value="Inalatória">Inalatória</option>
                          </select>
                        </td>
                        <td>
                          <input type="text" name="medicamentoPosologia[]" placeholder="Ex: 1 comprimido 3x/dia">
                        </td>
                        <td class="center">
                          <a class="btn red white-text" onclick="removerLinhaMedicamento(this)" style="display: inline-flex; align-items: center; justify-content: center; height: 36px; width: 36px;">
                            <i class='bx bx-trash'></i>
                          </a>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <div class="row center" style="margin-top:20px;">
                    <button class="btn teal" onclick="adicionarLinhaMedicamento()">
                      <i class='bx bx-plus'></i> linha
                    </button>
                  </div>
                </div>
              </div>

              <!-- BOTÃO SEGUINTE NO CANTO DIREITO -->
              <div class="row" style="margin-top:30px;padding-top:20px;border-top:2px solid #e0e0e0;">
                <div class="col s12" style="text-align: right;">
                  <button type="button" class="btn teal" onclick="avancarParaObservacoes()">
                    <i class='bx bx-chevron-right'></i> seguinte
                  </button>
                </div>
              </div>
            </div>

            <!-- TAB 3: OBSERVAÇÕES -->
            <div id="tabObservacoes" class="tab-panel">
              <div class="row">
                <div class="input-field col s12">
                  <textarea id="prescricaoFinal" class="materialize-textarea" style="min-height: 250px;"></textarea>
                  <label for="prescricaoFinal">Observações e Prescrição Médica</label>
                </div>
              </div>

              <div class="row">
                <div class="col s12">
                  <button type="button" class="btn blue" onclick="salvarPrescricao()" id="btnSalvar">
                    <i class='bx bx-save'></i> Salvar Prescrição
                  </button>
                  <button type="button" class="btn teal" onclick="imprimirPrescricao()">
                    <i class='bx bx-printer'></i> Imprimir
                  </button>
                  <button type="button" class="btn orange" onclick="copiarPrescricao()">
                    <i class='bx bx-copy'></i> Copiar
                  </button>
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

  </main>


   
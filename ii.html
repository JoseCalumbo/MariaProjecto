<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recep√ß√£o Hospitalar</title>

  <!-- Materialize CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />

  <style>
    body {
      background: #e4e9f7;
      font-family: 'Roboto', sans-serif;
    }

    /* TOP BAR */
    .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 45px;
      background: #1976d2;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 15px;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.16);
    }

    .top-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .top-left img {
      height: 28px;
    }

    .online-dot {
      width: 10px;
      height: 10px;
      background: #4caf50;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* SIDEBAR CHAT */
    .chat-sidebar {
      position: fixed;
      top: 45px;
      left: 0;
      width: 380px;
      height: calc(100vh - 45px);
      background: #fff;
      z-index: 999;
      transform: translateX(-100%);
      transition: transform .3s ease;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
    }

    .chat-sidebar.open {
      transform: translateX(0);
    }

    .chat-header {
      padding: 12px;
      background: #f5f5f5;
      border-bottom: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-header h6 {
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .chat-messages {
      flex: 1;
      padding: 15px;
      background: #fafafa;
      overflow-y: auto;
    }

    .chat-input {
      padding: 12px;
      background: #fff;
      border-top: 1px solid #ddd;
      display: flex;
      gap: 8px;
    }

    .chat-input input {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    /* FLOAT BUTTON */
    .chat-fab {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: #1976d2;
      color: #fff;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, .3);
      cursor: pointer;
      z-index: 1001;
      transition: all .3s ease;
    }

    .chat-fab:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0, 0, 0, .4);
    }

    /* MAIN */
    main {
      padding: 60px 20px 20px;
      transition: margin-left .3s ease;
      max-width: 1400px;
      margin-left: auto;
      margin-right: auto;
    }

    .chat-sidebar.open~main {
      margin-left: calc(380px + (100vw - 1400px) / 2);
    }

    @media (max-width: 1400px) {
      .chat-sidebar.open~main {
        margin-left: 380px;
      }
    }

    /* BOX */
    .box {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      margin-bottom: 20px;
    }

    .box h6 {
      margin: 0 0 15px 0;
      font-weight: 500;
      color: #1976d2;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* TABS CUSTOMIZADAS */
    .custom-tabs {
      display: flex;
      gap: 5px;
      margin-bottom: 0;
      background: transparent;
    }

    .custom-tab {
      flex: 1;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.7);
      border: none;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: #666;
      font-weight: 500;
      transition: all .3s ease;
      font-size: 14px;
    }

    .custom-tab:hover {
      background: rgba(25, 118, 210, 0.1);
      color: #1976d2;
    }

    .custom-tab.active {
      background: #fff;
      color: #1976d2;
      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.08);
    }

    .custom-tab span {
      white-space: nowrap;
    }

    @media (max-width: 1100px) {
      .custom-tab {
        flex-direction: column;
        padding: 8px 10px;
        font-size: 12px;
        gap: 4px;
      }
      
      .custom-tab span {
        white-space: normal;
        text-align: center;
        line-height: 1.2;
      }
    }

    .tab-content-wrapper {
      background: #fff;
      padding: 20px;
      border-radius: 0 8px 8px 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      min-height: 400px;
    }

    .tab-panel {
      display: none;
    }

    .tab-panel.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* VALIDA√á√ÉO */
    .input-field.error input,
    .input-field.error textarea,
    .input-field.error select {
      border-bottom: 1px solid #f44336 !important;
      box-shadow: 0 1px 0 0 #f44336 !important;
    }

    .error-message {
      color: #f44336;
      font-size: 12px;
      margin-top: 5px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    /* CHAT MESSAGE */
    .chat-message {
      margin-bottom: 12px;
      padding: 10px;
      border-radius: 8px;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .chat-message.user {
      background: #e3f2fd;
      text-align: right;
      margin-left: 40px;
    }

    .chat-message.system {
      background: #f5f5f5;
      margin-right: 40px;
    }

    /* CARD ESTAT√çSTICAS */
    .stats-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      margin-bottom: 20px;
    }

    .stats-card.blue {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
    }

    .stats-card.green {
      background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);
    }

    .stats-card.orange {
      background: linear-gradient(135deg, #fb8c00 0%, #ef6c00 100%);
    }

    .stats-card h3 {
      margin: 0;
      font-size: 2.5rem;
      font-weight: bold;
    }

    .stats-card p {
      margin: 5px 0 0 0;
      opacity: 0.9;
    }

    /* TABELA */
    .responsive-table {
      border: 1px solid #e0e0e0;
      border-radius: 4px;
    }

    .responsive-table thead tr {
      background-color: #e0e0e0;
    }

    .responsive-table th {
      padding: 12px 10px;
      font-weight: 500;
      color: #424242;
    }

    .responsive-table thead tr th:not(:last-child) {
      border-right: 2px solid #fff;
    }

    .responsive-table tbody tr {
      border-bottom: 1px solid #e0e0e0;
    }

    .responsive-table tbody tr:hover {
      background-color: #f5f5f5;
    }

    .responsive-table td {
      padding: 10px 8px;
    }

    /* BADGE STATUS */
    .badge-status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
    }

    .badge-status.aguardando {
      background: #fff3cd;
      color: #856404;
    }

    .badge-status.atendimento {
      background: #d1ecf1;
      color: #0c5460;
    }

    .badge-status.finalizado {
      background: #d4edda;
      color: #155724;
    }

    /* ALINHAMENTO DOS √çCONES */
    .btn i {
      vertical-align: middle;
      line-height: inherit;
      display: inline-flex;
      align-items: center;
    }

    /* RESPONSIVO */
    @media (max-width: 992px) {
      .chat-sidebar {
        width: 100%;
      }

      .chat-sidebar.open~main {
        margin-left: 0;
      }
    }
  </style>

</head>

<body>

  <!-- TOP BAR -->
  <div class="top-bar">
    <div class="top-left">
      <img src="https://clipartcraft.com/images/best-logo-design-transparent-6.png" alt="Logo">
      <div>
        <div>Recep√ß√£o Hospitalar</div>
        <small>Sistema de Atendimento</small>
      </div>
    </div>
    <div style="display:flex;align-items:center;gap:10px;">
      <span>Recepcionista Maria Silva</span>
      <div class="online-dot"></div>
    </div>
  </div>

  <!-- CHAT BUTTON -->
  <div class="chat-fab" id="btnOpenChat">
    <i class='bx bx-chat bx-sm'></i>
  </div>

  <!-- CHAT SIDEBAR -->
  <div class="chat-sidebar" id="chatSidebar">
    <div class="chat-header">
      <h6><i class='bx bx-message-square-dots'></i> Assistente Virtual</h6>
      <a class="btn-flat" id="btnCloseChat"><i class='bx bx-x bx-sm'></i></a>
    </div>
    <div class="chat-messages" id="chatMessages">
      <div class="chat-message system">
        <strong>Assistente:</strong> Ol√°! Como posso ajudar com o atendimento?
      </div>
    </div>
    <div class="chat-input">
      <input type="text" id="chatInput" placeholder="Digite sua mensagem...">
      <a class="btn blue" onclick="sendMsg()">
        <i class='bx bx-send'></i>
      </a>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <main id="mainContent">

    <!-- ESTAT√çSTICAS -->
    <div class="row">
      <div class="col s12 m6 l3">
        <div class="stats-card blue">
          <h3 id="totalPacientes">0</h3>
          <p>Total de Pacientes Hoje</p>
        </div>
      </div>
      <div class="col s12 m6 l3">
        <div class="stats-card orange">
          <h3 id="aguardando">0</h3>
          <p>Aguardando Atendimento</p>
        </div>
      </div>
      <div class="col s12 m6 l3">
        <div class="stats-card">
          <h3 id="emAtendimento">0</h3>
          <p>Em Atendimento</p>
        </div>
      </div>
      <div class="col s12 m6 l3">
        <div class="stats-card green">
          <h3 id="finalizados">0</h3>
          <p>Atendimentos Finalizados</p>
        </div>
      </div>
    </div>

    <!-- LAYOUT HORIZONTAL -->
    <div class="row">

      <!-- LISTA DE PACIENTES (ESQUERDA - 50%) -->
      <div class="col s12 l6">
        <div class="box">
          <h6><i class='bx bx-user-check'></i> Pacientes em Espera</h6>
          
          <div style="max-height: 500px; overflow-y: auto;">
            <table class="responsive-table">
              <thead>
                <tr>
                  <th>Senha</th>
                  <th>Paciente</th>
                  <th>Prioridade</th>
                  <th>Status</th>
                  <th>A√ß√£o</th>
                </tr>
              </thead>
              <tbody id="tabelaPacientes">
                <tr>
                  <td colspan="5" class="center-align" style="padding: 40px;">
                    <em style="color: #999;">Nenhum paciente na fila</em>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- FORMUL√ÅRIO DE CADASTRO (DIREITA - 50%) -->
      <div class="col s12 l6">
        <!-- TABS HEADER -->
        <div class="custom-tabs">
          <button class="custom-tab active" onclick="switchTab('tabCadastro')" id="btnTabCadastro">
            <i class='bx bx-user-plus'></i> <span>Novo Paciente</span>
          </button>
          <button class="custom-tab" onclick="switchTab('tabTriagem')" id="btnTabTriagem">
            <i class='bx bx-clipboard'></i> <span>Triagem</span>
          </button>
          <button class="custom-tab" onclick="switchTab('tabHistorico')" id="btnTabHistorico">
            <i class='bx bx-history'></i> <span>Hist√≥rico</span>
          </button>
        </div>

        <!-- TABS CONTENT -->
        <div class="tab-content-wrapper">

          <!-- TAB 1: CADASTRO -->
          <div id="tabCadastro" class="tab-panel active">
            <form id="formCadastro">
              <div class="row">
                <div class="input-field col s12">
                  <input type="text" id="nomePaciente" required>
                  <label for="nomePaciente">Nome Completo *</label>
                  <span class="error-message" id="errorNome">Campo obrigat√≥rio</span>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12 m6">
                  <input type="text" id="cpf" required>
                  <label for="cpf">CPF *</label>
                  <span class="error-message" id="errorCpf">CPF inv√°lido</span>
                </div>
                <div class="input-field col s12 m6">
                  <input type="date" id="dataNascimento" required>
                  <label for="dataNascimento">Data de Nascimento *</label>
                  <span class="error-message" id="errorData">Campo obrigat√≥rio</span>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12 m6">
                  <input type="tel" id="telefone" required>
                  <label for="telefone">Telefone *</label>
                  <span class="error-message" id="errorTelefone">Telefone inv√°lido</span>
                </div>
                <div class="input-field col s12 m6">
                  <select id="convenio" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="SUS">SUS</option>
                    <option value="Particular">Particular</option>
                    <option value="Unimed">Unimed</option>
                    <option value="Amil">Amil</option>
                    <option value="Bradesco">Bradesco Sa√∫de</option>
                    <option value="Sul America">Sul Am√©rica</option>
                  </select>
                  <label>Conv√™nio *</label>
                  <span class="error-message" id="errorConvenio">Selecione um conv√™nio</span>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <textarea id="endereco" class="materialize-textarea"></textarea>
                  <label for="endereco">Endere√ßo</label>
                </div>
              </div>

              <div class="row">
                <div class="col s12">
                  <button type="button" class="btn blue" onclick="cadastrarPaciente()">
                    <i class='bx bx-save'></i> Cadastrar Paciente
                  </button>
                  <button type="button" class="btn grey lighten-1" onclick="limparFormulario()">
                    <i class='bx bx-trash'></i> Limpar
                  </button>
                </div>
              </div>
            </form>
          </div>

          <!-- TAB 2: TRIAGEM -->
          <div id="tabTriagem" class="tab-panel">
            <form id="formTriagem">
              <div class="row">
                <div class="input-field col s12">
                  <select id="pacienteTriagem" required>
                    <option value="" disabled selected>Selecione o paciente</option>
                  </select>
                  <label>Paciente *</label>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12 m4">
                  <input type="text" id="pressao" placeholder="120/80">
                  <label for="pressao">Press√£o Arterial</label>
                </div>
                <div class="input-field col s12 m4">
                  <input type="number" id="temperatura" step="0.1" placeholder="36.5">
                  <label for="temperatura">Temperatura (¬∞C)</label>
                </div>
                <div class="input-field col s12 m4">
                  <input type="number" id="saturacao" min="0" max="100" placeholder="98">
                  <label for="saturacao">Satura√ß√£o (%)</label>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <select id="prioridade" required>
                    <option value="" disabled selected>Selecione</option>
                    <option value="Verde">Verde - N√£o Urgente</option>
                    <option value="Amarelo">Amarelo - Pouco Urgente</option>
                    <option value="Laranja">Laranja - Urgente</option>
                    <option value="Vermelho">Vermelho - Emerg√™ncia</option>
                  </select>
                  <label>Classifica√ß√£o de Risco *</label>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <textarea id="queixaPrincipal" class="materialize-textarea" required></textarea>
                  <label for="queixaPrincipal">Queixa Principal *</label>
                </div>
              </div>

              <div class="row">
                <div class="col s12">
                  <button type="button" class="btn blue" onclick="realizarTriagem()">
                    <i class='bx bx-check-circle'></i> Finalizar Triagem
                  </button>
                </div>
              </div>
            </form>
          </div>

          <!-- TAB 3: HIST√ìRICO -->
          <div id="tabHistorico" class="tab-panel">
            <div class="row">
              <div class="input-field col s12">
                <input type="text" id="buscaPaciente" onkeyup="buscarHistorico()">
                <label for="buscaPaciente">Buscar por nome ou CPF</label>
              </div>
            </div>

            <div id="resultadoHistorico">
              <p class="center-align" style="color: #999; padding: 40px;">
                Digite o nome ou CPF do paciente para buscar o hist√≥rico
              </p>
            </div>
          </div>

        </div>
      </div>

    </div>

  </main>

  <!-- Materialize JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <script>
    // Dados simulados
    let pacientes = [];
    let senhaAtual = 1;

    // Inicializar Materialize
    document.addEventListener('DOMContentLoaded', function () {
      M.updateTextFields();
      document.querySelectorAll('.materialize-textarea').forEach(textarea => {
        M.textareaAutoResize(textarea);
      });
      M.FormSelect.init(document.querySelectorAll('select'));
      atualizarEstatisticas();
    });

    // FUN√á√ÉO PARA TROCAR TABS
    function switchTab(tabId) {
      document.querySelectorAll('.custom-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelectorAll('.tab-panel').forEach(panel => {
        panel.classList.remove('active');
      });

      if (tabId === 'tabCadastro') {
        document.getElementById('btnTabCadastro').classList.add('active');
      } else if (tabId === 'tabTriagem') {
        document.getElementById('btnTabTriagem').classList.add('active');
        atualizarSelectPacientes();
      } else if (tabId === 'tabHistorico') {
        document.getElementById('btnTabHistorico').classList.add('active');
      }

      document.getElementById(tabId).classList.add('active');
      M.updateTextFields();
      document.querySelectorAll('.materialize-textarea').forEach(textarea => {
        M.textareaAutoResize(textarea);
      });
      M.FormSelect.init(document.querySelectorAll('select'));
    }

    // CHAT CONTROLS
    const chatSidebar = document.getElementById('chatSidebar');
    const btnOpen = document.getElementById('btnOpenChat');
    const btnClose = document.getElementById('btnCloseChat');

    btnOpen.onclick = () => {
      chatSidebar.classList.add('open');
      btnOpen.style.display = 'none';
    };

    btnClose.onclick = () => {
      chatSidebar.classList.remove('open');
      btnOpen.style.display = 'flex';
    };

    // CHAT
    function sendMsg() {
      const input = document.getElementById('chatInput');
      const mensagem = input.value.trim();

      if (!mensagem) {
        M.toast({ html: '‚ö†Ô∏è Digite uma mensagem', classes: 'orange' });
        return;
      }

      const chatMessages = document.getElementById('chatMessages');
      chatMessages.innerHTML += `
        <div class="chat-message user">
          <strong>Voc√™:</strong> ${mensagem}
        </div>
      `;

      input.value = '';
      chatMessages.scrollTop = chatMessages.scrollHeight;

      setTimeout(() => {
        chatMessages.innerHTML += `
          <div class="chat-message system">
            <strong>Assistente:</strong> Entendi. Posso ajudar com cadastro de pacientes, triagem ou busca de hist√≥rico.
          </div>
        `;
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 1000);
    }

    document.getElementById('chatInput').addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        sendMsg();
      }
    });

    // CADASTRAR PACIENTE
    function cadastrarPaciente() {
      const nome = document.getElementById('nomePaciente').value.trim();
      const cpf = document.getElementById('cpf').value.trim();
      const dataNascimento = document.getElementById('dataNascimento').value;
      const telefone = document.getElementById('telefone').value.trim();
      const convenio = document.getElementById('convenio').value;
      const endereco = document.getElementById('endereco').value.trim();

      if (!nome || !cpf || !dataNascimento || !telefone || !convenio) {
        M.toast({ html: '‚ö†Ô∏è Preencha todos os campos obrigat√≥rios', classes: 'orange' });
        return;
      }

      const paciente = {
        id: Date.now(),
        senha: `A${String(senhaAtual).padStart(3, '0')}`,
        nome,
        cpf,
        dataNascimento,
        telefone,
        convenio,
        endereco,
        status: 'Aguardando',
        prioridade: 'N√£o definida',
        horaCadastro: new Date().toLocaleTimeString('pt-BR')
      };

      pacientes.push(paciente);
      senhaAtual++;

      atualizarTabelaPacientes();
      atualizarEstatisticas();
      limparFormulario();

      M.toast({ html: `‚úÖ Paciente ${paciente.nome} cadastrado com senha ${paciente.senha}`, classes: 'green' });
    }

    // ATUALIZAR TABELA
    function atualizarTabelaPacientes() {
      const tbody = document.getElementById('tabelaPacientes');
      
      if (pacientes.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="5" class="center-align" style="padding: 40px;">
              <em style="color: #999;">Nenhum paciente na fila</em>
            </td>
          </tr>
        `;
        return;
      }

      tbody.innerHTML = '';
      pacientes.forEach(p => {
        const statusClass = p.status === 'Aguardando' ? 'aguardando' : 
                          p.status === 'Em Atendimento' ? 'atendimento' : 'finalizado';
        
        const cor = p.prioridade === 'Vermelho' ? 'red-text' :
                    p.prioridade === 'Laranja' ? 'orange-text' :
                    p.prioridade === 'Amarelo' ? 'yellow-text text-darken-3' :
                    p.prioridade === 'Verde' ? 'green-text' : '';

        tbody.innerHTML += `
          <tr>
            <td><strong>${p.senha}</strong></td>
            <td>${p.nome}</td>
            <td><span class="${cor}">${p.prioridade}</span></td>
            <td><span class="badge-status ${statusClass}">${p.status}</span></td>
            <td>
              <a class="btn-small blue" onclick="chamarPaciente(${p.id})">
                <i class='bx bx-phone-call'></i>
              </a>
            </td>
          </tr>
        `;
      });
    }

    // ATUALIZAR ESTAT√çSTICAS
    function atualizarEstatisticas() {
      document.getElementById('totalPacientes').textContent = pacientes.length;
      document.getElementById('aguardando').textContent = pacientes.filter(p => p.status === 'Aguardando').length;
      document.getElementById('emAtendimento').textContent = pacientes.filter(p => p.status === 'Em Atendimento').length;
      document.getElementById('finalizados').textContent = pacientes.filter(p => p.status === 'Finalizado').length;
    }

    // CHAMAR PACIENTE
    function chamarPaciente(id) {
      const paciente = pacientes.find(p => p.id === id);
      if (paciente) {
        paciente.status = 'Em Atendimento';
        atualizarTabelaPacientes();
        atualizarEstatisticas();
        M.toast({ html: `üì¢ Chamando paciente ${paciente.nome} - Senha ${paciente.senha}`, classes: 'blue' });
      }
    }

    // REALIZAR TRIAGEM
    function realizarTriagem() {
      const pacienteId = document.getElementById('pacienteTriagem').value;
      const prioridade = document.getElementById('prioridade').value;
      const queixa = document.getElementById('queixaPrincipal').value.trim();

      if (!pacienteId || !prioridade || !queixa) {
        M.toast({ html: '‚ö†Ô∏è Preencha todos os campos obrigat√≥rios', classes: 'orange' });
        return;
      }

      const paciente = pacientes.find(p => p.id == pacienteId);
      if (paciente) {
        paciente.prioridade = prioridade;
        paciente.queixa = queixa;
        paciente.pressao = document.getElementById('pressao').value;
        paciente.temperatura = document.getElementById('temperatura').value;
        paciente.saturacao = document.getElementById('saturacao').value;

        atualizarTabelaPacientes();
        
        // Limpar formul√°rio de triagem
        document.getElementById('formTriagem').reset();
        M.FormSelect.init(document.querySelectorAll('select'));
        M.updateTextFields();

        M.toast({ html: `‚úÖ Triagem realizada para ${paciente.nome}`, classes: 'green' });
      }
    }

    // ATUALIZAR SELECT DE PACIENTES
    function atualizarSelectPacientes() {
      const select = document.getElementById('pacienteTriagem');
      select.innerHTML = '<option value="" disabled selected>Selecione o paciente</option>';
      
      pacientes.forEach(p => {
        if (p.status === 'Aguardando' || p.status === 'Em Atendimento') {
          select.innerHTML += `<option value="${p.id}">${p.senha} - ${p.nome}</option>`;
        }
      });
      
      M.FormSelect.init(document.querySelectorAll('select'));
    }

    // BUSCAR HIST√ìRICO
    function buscarHistorico() {
      const termo = document.getElementById('buscaPaciente').value.trim().toLowerCase();
      const resultado = document.getElementById('resultadoHistorico');

      if (termo.length < 3) {
        resultado.innerHTML = `
          <p class="center-align" style="color: #999; padding: 40px;">
            Digite pelo menos 3 caracteres para buscar
          </p>
        `;
        return;
      }

      const encontrados = pacientes.filter(p => 
        p.nome.toLowerCase().includes(termo) || 
        p.cpf.includes(termo)
      );

      if (encontrados.length === 0) {
        resultado.innerHTML = `
          <p class="center-align" style="color: #999; padding: 40px;">
            Nenhum paciente encontrado
          </p>
        `;
        return;
      }

      resultado.innerHTML = '';
      encontrados.forEach(p => {
        resultado.innerHTML += `
          <div class="card">
            <div class="card-content">
              <span class="card-title">${p.nome}</span>
              <p><strong>CPF:</strong> ${p.cpf}</p>
              <p><strong>Senha:</strong> ${p.senha}</p>
              <p><strong>Conv√™nio:</strong> ${p.convenio}</p>
              <p><strong>Status:</strong> ${p.status}</p>
              <p><strong>Prioridade:</strong> ${p.prioridade}</p>
              ${p.queixa ? `<p><strong>Queixa:</strong> ${p.queixa}</p>` : ''}
              <p><strong>Hora Cadastro:</strong> ${p.horaCadastro}</p>
            </div>
          </div>
        `;
      });
    }

    // LIMPAR FORMUL√ÅRIO
    function limparFormulario() {
      document.getElementById('formCadastro').reset();
      M.updateTextFields();
      M.FormSelect.init(document.querySelectorAll('select'));
    }
  </script>
  
</body>

</html>
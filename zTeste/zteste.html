<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teste Dropdown Farmácia - Funcional</title>
  <!-- Materialize CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body { padding: 40px; }

    /* garante que o submenu não seja cortado */
    .dropdown-content { overflow: visible !important; }

    /* aparência básica do submenu */
    .dropdown-content .submenu {
      display: none;
      position: absolute;
      left: 100%; /* abre à direita */
      top: 0;
      min-width: 200px;
      margin-left: 6px;
      z-index: 2000;
      border-radius: 4px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      background: #fff;
    }

    /* cada li que tem submenu precisa ser relativo */
    .dropdown-content li.submenu-li { position: relative; }

    /* abrir submenu no hover (desktop) ou quando a classe .submenu-open estiver ativa */
    .dropdown-content li.submenu-li:hover > .submenu,
    .dropdown-content li.submenu-li.submenu-open > .submenu { display: block; }

    /* cuidar do texto para nao quebrar */
    .dropdown-content .submenu li a { white-space: nowrap; }

    /* responsivo: em telas pequenas abre para esquerda */
    @media (max-width: 600px) {
      .dropdown-content .submenu { left: auto; right: 100%; margin-left: 0; margin-right: 6px; }
    }

    /* pequeno ajuste visual para o trigger do submenu */
    .submenu-toggle { display: flex; align-items: center; justify-content: space-between; }
    .submenu-toggle .material-icons.right { font-size: 20px; }
  </style>
</head>
<body>

  <h5>Teste: Dropdown com Submenu Lateral (Farmácia)</h5>

  <!-- Botão que abre o dropdown principal -->
  <a class="dropdown-trigger btn" href="#" data-target="dropdown-mais">Mais Opções
    <i class="material-icons right">arrow_drop_down</i>
  </a>

  <!-- Dropdown principal (conteúdo) -->
  <ul id="dropdown-mais" class="dropdown-content">
    <li>
      <a href="#">
        <i class="material-icons left">people</i>Funcionário
      </a>
    </li>
    <li>
      <a href="#">
        <i class="material-icons left">local_hospital</i>Pacientes
      </a>
    </li>

    <!-- item que contém o submenu (Farmácia) -->
    <li class="submenu-li">
      <!-- use .submenu-toggle para o click/touch -->
      <a class="submenu-toggle" href="#">
        <span><i class="material-icons left">science</i>Farmácia</span>
        <i class="material-icons right">chevron_right</i>
      </a>

      <!-- submenu aninhado -->
      <ul class="submenu">
        <li><a href="#"><i class="material-icons left">inventory_2</i>Estoque</a></li>
        <li><a href="#"><i class="material-icons left">description</i>Receitas</a></li>
        <li><a href="#"><i class="material-icons left">local_shipping</i>Fornecedores</a></li>
      </ul>
    </li>

    <li class="divider"></li>
    <li><a href="#"><i class="material-icons left">person</i>Perfil Utilizadores</a></li>
  </ul>

  <!-- Materialize JS (é importante que esteja depois do HTML) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // inicializa dropdowns do Materialize
      var elems = document.querySelectorAll('.dropdown-trigger');
      M.Dropdown.init(elems, {
        coverTrigger: false,
        constrainWidth: false,
        closeOnClick: false // importante: não fecha ao clicar em itens que só abrem submenu
      });

      // Toggle para touch/click (útil em mobile): alterna a classe .submenu-open
      document.querySelectorAll('.submenu-toggle').forEach(function(toggle){
        toggle.addEventListener('click', function(e){
          e.stopPropagation(); // não propaga para o documento
          var li = this.closest('li');
          // fecha outras submenus abertas dentro do mesmo dropdown
          li.parentElement.querySelectorAll('.submenu-li').forEach(function(other){
            if (other !== li) other.classList.remove('submenu-open');
          });
          li.classList.toggle('submenu-open');
        });
      });

      // Clique fora: fecha qualquer submenu aberto
      document.addEventListener('click', function(e){
        if (!e.target.closest('.dropdown-content')){
          document.querySelectorAll('.submenu-li.submenu-open').forEach(function(el){ el.classList.remove('submenu-open'); });
        }
      });
    });
  </script>
</body>
</html>
